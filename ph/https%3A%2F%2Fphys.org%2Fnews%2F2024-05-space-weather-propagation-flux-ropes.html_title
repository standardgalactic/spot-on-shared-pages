Where space weather starts: Self-consistent propagation of flux ropes in realistic coronal simulations