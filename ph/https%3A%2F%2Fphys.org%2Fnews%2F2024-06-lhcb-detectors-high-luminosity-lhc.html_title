Upgrading the LHCb sub-detectors for the high-luminosity LHC