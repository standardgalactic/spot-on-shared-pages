Defensive cage architectures in herbivore-driven ecosystems